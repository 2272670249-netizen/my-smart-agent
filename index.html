<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我的Coze智能体</title>
</head>
<body>
    <h1>欢迎使用我的智能体</h1>
    <p id="status">正在初始化聊天组件...</p>

    <!-- 尝试更换一个SDK版本 -->
    <script src="https://lf-cdn.coze.cn/obj/unpkg/flow-platform/chat-app-sdk/1.1.0/libs/cn/index.js"></script>
    
    <script>
        // 使用更简化的初始化配置
        document.addEventListener('DOMContentLoaded', function() {
            // 检查SDK是否加载成功
            if (typeof CozeWebSDK === 'undefined') {
                document.getElementById('status').textContent = '错误：Coze SDK 加载失败，请检查网络连接或稍后重试。';
                return;
            }

            try {
                // 初始化配置
                const client = new CozeWebSDK.WebChatClient({
                    config: {
                        bot_id: '7578063729297145899' // 请务必替换为您的真实智能体ID
                    },
                    auth: {
                        type: 'token',
                        token: 'pat_iqDSBzSYUIOn9Crgna838VghoALGsD34HzAICrsZ3X5mL4dJ8ofsFxmWCYmqaqxX' // 请务必替换为您的真实访问令牌
                    },
                    userInfo: {
                        id: 'guest_user_' + Date.now(),
                        nickname: '网站访客'
                    }
                });

                // 可选：监听成功事件
                client.on('sdk.ready', function() {
                    document.getElementById('status').textContent = '加载完成！请点击页面右下角的圆形图标开始对话。';
                });

            } catch (error) {
                console.error('初始化失败:', error);
                document.getElementById('status').textContent = '聊天功能初始化失败: ' + error.message;
            }
        });
    </script>
</body>
</html>
