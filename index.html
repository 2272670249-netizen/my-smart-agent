<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æˆ‘çš„AIæ™ºèƒ½åŠ©æ‰‹</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .container {
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            width: 90%;
            max-width: 500px;
            text-align: center;
        }
        .status {
            margin: 25px 0;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid;
            transition: all 0.3s ease;
        }
        .loading { 
            background: #e3f2fd; 
            border-left-color: #2196f3;
            color: #1565c0;
        }
        .success { 
            background: #e8f5e9; 
            border-left-color: #4caf50;
            color: #2e7d32;
        }
        .error { 
            background: #ffebee; 
            border-left-color: #f44336;
            color: #c62828;
        }
        h1 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 28px;
        }
        .icon {
            font-size: 48px;
            margin-bottom: 20px;
        }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            margin-top: 15px;
            transition: background 0.3s;
        }
        .btn:hover {
            background: #5a6fd8;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="icon">ğŸ¤–</div>
        <h1>æˆ‘çš„AIæ™ºèƒ½åŠ©æ‰‹</h1>
        <div id="status" class="status loading">
            <p>æ­£åœ¨å¯åŠ¨æ™ºèƒ½åŠ©æ‰‹æœåŠ¡...</p>
        </div>
        <button class="btn" onclick="window.location.reload()">åˆ·æ–°é¡µé¢</button>
    </div>

    <script>
        // æ™ºèƒ½ä½“åˆå§‹åŒ–å‡½æ•°
        function initializeSmartAssistant() {
            const statusEl = document.getElementById('status');
            
            // æ£€æŸ¥å…¨å±€Cozeå¯¹è±¡æ˜¯å¦å¯ç”¨ï¼ˆé€šè¿‡å†…è”SDKï¼‰
            if (typeof CozeWebSDK === 'undefined') {
                statusEl.innerHTML = `
                    <p>SDKåŠ è½½å¼‚å¸¸ï¼Œå°è¯•å¤‡ç”¨æ–¹æ¡ˆ...</p>
                `;
                // å¦‚æœå†…è”SDKä¹Ÿå¤±è´¥ï¼Œå°è¯•åŠ¨æ€åŠ è½½
                loadFallbackSDK();
                return;
            }

            try {
                // åˆå§‹åŒ–Cozeæ™ºèƒ½ä½“ - è¯·æ›¿æ¢ä¸‹é¢çš„YOURä¿¡æ¯ï¼
                const botClient = new CozeWebSDK.WebChatClient({
                    config: {
                        bot_id: '7578063729297145899'  // ğŸ”´ æ›¿æ¢ä¸ºæ‚¨çš„çœŸå®æ™ºèƒ½ä½“ID
                    },
                    auth: {
                        type: 'token', 
                        token: 'pat_iqDSBzSYUIOn9Crgna838VghoALGsD34HzAICrsZ3X5mL4dJ8ofsFxmWCYmqaqxX'  // ğŸ”´ æ›¿æ¢ä¸ºæ‚¨çš„çœŸå®è®¿é—®ä»¤ç‰Œ
                    },
                    userInfo: {
                        id: 'user_' + Math.random().toString(36).substr(2, 9),
                        nickname: 'ç½‘ç«™è®¿å®¢'
                    },
                    ui: {
                        asstBtn: {
                            isNeed: true,
                            color: '#667eea',
                            size: 'large'
                        },
                        chatBot: {
                            title: 'AIæ™ºèƒ½åŠ©æ‰‹',
                            welcome: 'æ‚¨å¥½ï¼æˆ‘æ˜¯æ‚¨çš„AIåŠ©æ‰‹ï¼Œå¾ˆé«˜å…´ä¸ºæ‚¨æœåŠ¡ã€‚',
                            style: {
                                primaryColor: '#667eea'
                            }
                        }
                    },
                    onError: (error) => {
                        console.error('Coze SDK Error:', error);
                        statusEl.innerHTML = `
                            <p>æ™ºèƒ½ä½“æœåŠ¡é‡åˆ°é—®é¢˜</p>
                            <p><small>${error.message || 'è¯·æ£€æŸ¥é…ç½®ä¿¡æ¯'}</small></p>
                        `;
                        statusEl.className = 'status error';
                    }
                });

                // æˆåŠŸåˆå§‹åŒ–
                statusEl.innerHTML = `
                    <p>âœ… æ™ºèƒ½åŠ©æ‰‹å·²å°±ç»ªï¼</p>
                    <p><small>è¯·ç‚¹å‡»å³ä¸‹è§’è“è‰²å›¾æ ‡å¼€å§‹å¯¹è¯</small></p>
                `;
                statusEl.className = 'status success';

            } catch (error) {
                statusEl.innerHTML = `
                    <p>âŒ åˆå§‹åŒ–å¤±è´¥</p>
                    <p><small>${error.message || 'æœªçŸ¥é”™è¯¯'}</small></p>
                `;
                statusEl.className = 'status error';
                console.error('åˆå§‹åŒ–é”™è¯¯:', error);
            }
        }

        // å¤‡ç”¨SDKåŠ è½½æ–¹æ¡ˆ
        function loadFallbackSDK() {
            const statusEl = document.getElementById('status');
            statusEl.innerHTML = '<p>æ­£åœ¨å°è¯•å¤‡ç”¨åŠ è½½æ–¹æ¡ˆ...</p>';
            
            // å°è¯•å¤šä¸ªå¤‡ç”¨CDN
            const fallbackSources = [
                'https://cdn.jsdelivr.net/npm/@coze/web-sdk@1.1.0/dist/coze-sdk.min.js',
                'https://unpkg.com/@coze/web-sdk@1.1.0/dist/coze-sdk.min.js',
                'https://lf3-cdn-tos.douyinstatic.com/obj/coze-web-sdk/coze-sdk.min.js'
            ];
            
            let currentTry = 0;
            
            function tryLoad() {
                if (currentTry >= fallbackSources.length) {
                    statusEl.innerHTML = `
                        <p>âŒ æ‰€æœ‰åŠ è½½æ–¹æ¡ˆå‡å¤±è´¥</p>
                        <p><small>è¯·æ£€æŸ¥ç½‘ç»œç¯å¢ƒæˆ–è”ç³»ç®¡ç†å‘˜</small></p>
                    `;
                    statusEl.className = 'status error';
                    return;
                }
                
                const script = document.createElement('script');
                script.src = fallbackSources[currentTry];
                script.onload = () => {
                    statusEl.innerHTML = '<p>å¤‡ç”¨æ–¹æ¡ˆåŠ è½½æˆåŠŸï¼Œæ­£åœ¨åˆå§‹åŒ–...</p>';
                    setTimeout(initializeSmartAssistant, 100);
                };
                script.onerror = () => {
                    currentTry++;
                    tryLoad();
                };
                document.head.appendChild(script);
            }
            
            tryLoad();
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // å…ˆå°è¯•å†…è”SDKåˆå§‹åŒ–
            setTimeout(initializeSmartAssistant, 100);
        });
    </script>

    <!-- å†…è”çš„Coze SDKä»£ç ï¼ˆBase64ç¼–ç ç¡®ä¿å¯ç”¨æ€§ï¼‰ -->
    <script>
    // è¿™é‡ŒåŸæœ¬åº”è¯¥æ˜¯Base64ç¼–ç çš„SDKä»£ç ï¼Œä½†ç”±äºé•¿åº¦é™åˆ¶æ— æ³•å®Œæ•´åŒ…å«
    // æˆ‘ä»¬ä½¿ç”¨åŠ¨æ€åŠ è½½æ–¹æ¡ˆæ¥ç¡®ä¿å¯ç”¨æ€§
    </script>
    
    <!-- ç›´æ¥å†…è”ç®€åŒ–ç‰ˆSDKåŠ è½½å™¨ -->
    <script>
    (function(){
        // ç®€åŒ–ç‰ˆSDKåŠ è½½é€»è¾‘
        if (typeof CozeWebSDK === 'undefined') {
            // å¦‚æœSDKæœªå®šä¹‰ï¼Œè®¾ç½®ä¸€ä¸ªç©ºçš„å ä½ç¬¦ï¼Œè®©fallbackæ–¹æ¡ˆå¤„ç†
            window.CozeWebSDK = window.CozeWebSDK || {};
        }
    })();
    </script>
</body>
</html>
